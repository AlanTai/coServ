# coServ

coServ 是以 node.js 實作的一個非常精簡的 web server。與一般 web server 不同的地方是，coServ 可以用來讀取來自不同網站的內容，然後將結果整合到同一個網頁中。

不論是只有幾篇靜態網頁的小網站，或是結構複雜的網路應用（web app），coServ 都可勝任愉快。coServ 以類似 EJS 的樣板引擎，協助網站開發者將內容和視覺設計做有效的分離。很特別的是，coServ 的樣板引擎不僅可以用來合成 HTML 的內容，也可以用來合成 Javascript 和 CSS 。這給前端工程師更大的彈性，也使得程式碼重複使用變得更可行。

coServ 是基於 "internet of servers" 的理念所設計的。這意味不同網域的 server 可以互相交談，進而合作產出對使用者最佳的內容或服務。此外，coServ 也是為了協助開發者利用 COIMOTION API 這個後端服務而設計的。

##  功能特色

+ 比網站樣板更強大的「頁型」系統，使前端設計更為簡便。

+ 將網頁分解成區域和區塊。設計時只需專注於小規模的區塊，coServ 會自動將網頁組合好。每個區塊可以重複使用在不同的網頁中。

+ 使用類似 EJS 的樣板引擎 (template engine)來動態產生實際的 HTML, Javascript 與 CSS 的內容。是的，連 Javascript 和 CSS 也都可以用樣板引擎來生成。

+ 能自動從 COIMOTION API 引擎中讀取資料。

+ 如果需要從其他網站或資料源取得資料，可以自行撰寫模組來達成。

+ 利用語系資源套件來支援多國語系。支援多國語言只需單一的 HTML 原始檔。

+ 單一的 coServ 可以支援多個網站，而且非常簡單。只需二三行設定碼就可達成。

## 如何安裝
npm install coserv

## 如何使用
1. 安裝完成後到 coServ 目錄底下執行 'node coServ.js' 即可。Server 預設在 8080 port。

2. 如果你希望 server 跑在其他的埠號（例如 80），可以直接修改 coServ.js 的最後一行。

3. 如果你要指定網域給 server，那麼只需修改 'www/sites.json' 這個檔。把裡面的 IP 網址 127.0.0.1 改成你所要的網域即可（當然你要先取得網域，並將 DNS 指向 coServ 所在的位置）。

4. 試著在網路瀏覽器上輸入 http://127.0.0.1:8080（如果你已指定了網域，那就改用 http://www.yourDomain.com）。如果設定都正確，你就會看到預設的首頁。

## 建立自己的網站
從範例開始改大概是最快的方法。假設你用下載內容中的 'demoApp'做基礎，以下說明所需的步驟：

1. 到 coServ/www/themes 目錄底下複製整個 'demoApp'的目錄，並為新的目錄取的名。假設這個新網站的代碼名稱為 'foo'。

2. 所有網站的一切（外觀、行為）都是由'foo'目錄底下的檔案所決定，沒其他地方了。其中 siteURI.json 列出網站所有的網址（類似 site map 的功能），而 layoutMap.json 檔案則用來決定什麼網址要使用哪個頁型來進行畫面的組合和輸出。至於 'layout' 這個目錄包含了網站所使用的所有頁型。在目前的範例網站上只有一個 'default' 的預設頁型。

3. 你還必須告訴 coServ 現在有了一個新網站。這件事是在 'www/sites.json' 檔案中敘明。這個檔案簡單易懂，直接看內容就知道如何修改。
